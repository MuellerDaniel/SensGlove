\section{Pose Estimation} \label{sec:estimationRes}

\subsection{Identification of the Minimization Process} \label{subsec:resSim}

\subsubsection{Utilized Minimization Methods} \label{subsubsec:miniMethod}

\todo{Use a more ordered way, to describe the different parameters of the minimization method:
		\begin{itemize}
		\item Sth like \grqq The used objective function is described by the equation of the cylindrical(dipole) model and does (not) comprise the movement of $ \phi_{MCP} $. For the (un)constrained minimization one(...four) sensor reading is used to estimate the index(2,3...) finger states.
		\item Mind consistency about finger state vector (2 or 3!)
		\end{itemize}}
The size and complexity of the minimization problem, described in \ref{sec:estimation} is dependent on the number of exploited sensors and magnets. The beforehand introduced minimization problem \ref{eq:minimization} is stated here once again for clarity:
\begin{equation*} \label{eq:minimization}
\begin{aligned}
\underset{\mathrm{X}_K}{\text{minimize}} & & f(\mathrm{X}_K) = || \tilde{\mathrm{M}} - \mathrm{M}(\mathrm{X}_K) ||\\
\text{subject to} & & 0 & \leq {x}_1(\theta_{MCP}) \leq & 1/2 \cdot \pi, \\
				  & & 0 & \leq {x}_1(\theta_{PIP})  \leq & 110/180 \cdot \pi, \\
				  & & -30/180 \cdot \pi & \leq {x}_1(\phi_{MCP}) \leq & 30/180 \cdot \pi, \\
				  & & 0 & \leq {x}_2(\theta_{MCP})  \leq & 1/2 \cdot \pi, \\
				  & & \vdots \\
				  & & -30/180 \cdot \pi & \leq {x}_K(\phi_{MCP}) \leq & 30/180 \cdot \pi
\end{aligned}
\end{equation*}
Remind, that the overall size of the observable measurements $ \tilde{\mathrm{M}} $ is $ (3 \cdot N) \times 1 $ (with $ N $ being the number of sensors, taken into account) and the size of the system state X is $ (3 \cdot K) \times 1 $ (with $ K $ being the number of fingers/magnets to describe). In order to gather a fully determined system, the number of sensors taken into account has to be at least as high as the number of magnets. This means, trying to estimate the state of four fingers with only one sensor could lead to ambiguous and bad results. Further on, the problem is nonlinear, which restricts the selection of the minimization method. The problem can be solved by applying the anatomic constraints as bounds or not. The SciPy package comes with the \emph{minimize} function, which is especially for solving scalar minimization problems. It can be invoked with different algorithms and their corresponding additional options. Since the cylindrical model is a numerical approximation, the derivative can not be evaluated. Therefore the desired minimization algorithms need to approximate it by there own.

The following explanations should give a short overview on the principle of the utilized methods and why they were chosen. For further reading on numerical optimization methods, please have a look at \cite{nocedal2006numerical} (on which the following paragraphs are based).\\
For solving the problem without taking the anatomic bounds into account, the \ac{BFGS} algorithm is used. It is an approximation of Newton's method, for finding a solution. Newton's method describes derivative based approaches, to find local minima around a certain initial guess $ \mathrm{X}_{0} $. To find values for $ x $, which minimize the outcome of the function $ f $, different search methods exist. The line search approach tries to find the local minimum along a line, which is determined by the Jacobian $ \nabla f $ and Hessian $ \nabla^{2} f $. Since the \ac{BFGS} approximates the derivative  $ \nabla f $, it is called quasi-Newton. $ \nabla f $ is updated at every iteration. An iteration step consists of finding a value $ x_{k+1} $, which minimizes $ f $. This is done till the gradient norm $ || \nabla f|| < \epsilon ||$, with $ \epsilon $ representing the convergence tolerance. In other words, a solution is found, if the change in the value of $ ||\nabla f|| $ is smaller than $ \epsilon $. As a characteristic of the \ac{BFGS} method, only the first derivative needs to be approximated. The rate of convergence for the method is stated to be linear. Further on it is assumed to be robust. The \ac{BFGS} implementation of SciPy shows very good results for the default values for $ \epsilon = 1.5e-08 $. The overall termination tolerance, defining the magnitude of $ f(\mathrm{X}_K) $ is denoted to be $ 1.0e-07 $. Shrinking this value, would lead more exact results, but would also induce more iteration steps and therefore a higher computation time. The results for the presented value show a good trade off between time and accuracy.\\
For solving the problem by taking the anatomic conditions into account, SciPy provides a method called \ac{SLSQP}. The constraints can be passed in as a pair of $ (min,max) $ for each variable, and reflect hard bounds. The underlying principle is based on least-squares methods. Therefore the system has to be overdetermined or at least fully determined. It tries to fit the observed data (i.e. the measurements) to a given model, by adjusting the model parameters. This is actually often used for data-fitting. While a system state is desired and the model comes with no additional parameters, the method is used in a slightly different way. In contrast to the classic approach, the model is fitted to the measurement data. The parameters in this case are the values of the system state $ \mathrm{X}_K $. In the least squares sense, the sum of the errors between the model at state $ \mathrm{X}_{0} $ and the measurements is squared and minimized. Exactly this is expressed by the objective function $ f(\mathrm{X}_K) $. Again, a starting point $ \mathrm{X}_{0} $ has to be provided. For identifying the direction of $ x $ in each iteration step, Powells method \cite{powell1964efficient} is used. This derivative free approach identifies independent convergence vectors for each variable. It can be interpreted as the approximation of $ \nabla f $. At each iteration step, those search directions are defined and therefore the new system state can be expressed by a combination of them in turn. In order to bring in the constraints, $ f $ is modified to represent those restrictions as a non-negative least squares problem. As the name suggests, the restriction to the system state is the following $ \mathrm{X} \geq 0$. Those reformulations are done by the SciPy method, therefore no further adjustments to the model or the bounds have to be made by the user. In the end the recursion gets performed, till the termination tolerance for $ f(\mathrm{X}_K) $ is fulfilled.\\
It should be mentioned, that for the implemented estimation routine, the initial guess $ \mathrm{X}_{0} $ is chosen to be the state, estimated by the minimizer one step ahead. Since the estimation assumes to start with stretched fingers, the overall $ \mathrm{X}_{0} $ is a vector of 0.  


\subsubsection{Classifying the Methods with Simulated Data} \label{subsubsec:simEval}

In order to get an impression on the expectable results of the minimization method, it is tested with a simulated dataset. A self chosen predefined set of states is determined, which should represent the motion of the fingers. This sequence of joint angles is simulated using the cylindrical model, to obtain the value of the expectable magnetic flux density, measurable by a specific sensor for the corresponding system state. The cylindrical model is used, since it represents the behaviour of the bar magnet and is not just a simplification, like the dipole model. Those values for the expectable magnetic flux density are then passed to the minimization routine, to estimate the system states. The result of the minimization should of course reflect the predefined motion sequence. Therefore it can directly be compared to the known state values, to identify the quality of the solver and its behaviour.\\
There are several parameters for formalizing the estimation problem and to tune the solver:
\begin{itemize}
\item Expressing the minimization as an unconstrained (by using the \ac{BFGS} algorithm) or constrained (by using the \ac{SLSQP} algorithm) problem
\item Considering the influence of the movement of adduction-abduction or not.
\item Formalizing the objective function using the cylindrical or the dipole model.
\item The behaviour regarding different determinedness of the system, which means estimating the states of one or multiple fingers by taking one or multiple sensors into account.
\end{itemize}
The results will be compared by calculating the mean and standard deviation of the error-norm to the perfect system state for each finger. Further on the calculation times of the different methods can be compared.

As a first step, the different optimization parameters are evaluated for the movement of a single finger. Therefore the size of the system state is $ \mathrm{X}_{1} = 3 $ for taking adduction-abduction into account and $ \mathrm{X}^\prime_{1} = 2 $ for neglecting this additional state. The size of the simulated measurements is dependent on the number of sensors, taken into account. The index finger is chosen for evaluating the different parameters, but the results are expected not to change, by choosing a different one. The utilized gesture sequence is displayed for the three states of the index finger in \ref{fig:indexStates}. The angular change, and therefore the stepwidth between two states is determined by combining the observations for the angular velocity from Ingram et al. \cite{ingram2008statistics} and the data rate of the sensor system. An acquisition frequency of \SI{20}{\Hz} in combination with a mean angular velocity of \SI[per-mode=symbol]{10}{\degree \per \second} leads to an observable maximum change of \SI[per-mode=symbol]{0.5}{\degree \per \second} (= \SI[per-mode=symbol]{0.0085}{\radian \per \second}). Therefore, the whole set is divided into 1419 datapoints, which results in a total duration of \SI{70.95}{\second} for performing the motion. The state values are plotted against time. The motion is constructed, to represent simple and complex movements of the finger, including flexion-extension, as well as adduction-abduction. The motion sequence includes joint movements, which happen as unique motions at a time. For example between \SI{0}{\second} and \SI{20}{\second} only the \ac{MCP} joint moves. Some, which arise together, like between \SI{40}{\second} and \SI{60}{\second}, where all three joints are performing flexion-extension. Also only small movements are simulated. Between \SI{38}{\second} and \SI{42}{\second}, $ \theta_{PIP} \; \text{and} \; \theta_{DIP} $ change only about \SI{0.26}{\radian}. The movement of adduction-abduction is applied during a short sequence, since the range of movement is small and also occurs more rarely, compared to flexion-extension. 
\begin{figure}
\centering
\includegraphics{pictures/plots/indexStates.png}
\caption[Introduced movement pattern for index finger estimation]
{The introduced motion pattern for the estimation of the state vector for the index finger. For a better readability, the four states are divided into individual figures. The movements are chosen to test whether the estimation is capable of changes, happening to a single state or a combination of them.}
\label{fig:indexStates}
% python script: 160224_plotSequence.py
\end{figure}
\todo{Also explain WHY the results are like they are!
	\begin{itemize}
	\item Overdetermindedness: Because the minimizer has more equations, to solve the problem and is therefore directed in the right direction already by the measurements/system values
	\item Cylindrical: Because you predict the field with it (I think I got that...)
	\item Constrained/Unconstrained: I think I got that, otherwise, obvious...
	\item ad-ab: mainly because you simulate the movement of ad-ab at a small time span and have the B-field of it in your states. Without that, the results would be as good as with ad-ab. This proves, that $ \phi_{MCP} $ can be estimated properly! And since it is more natural, ... (think I got it at some points...)
	\end{itemize}}
The obtained error means and standard deviations for each parameter combination are presented in \ref{tab:oneFing} in radians. The numbers in the very first column indicate the combination of fingers and sensors. The first number represents the estimated fingers, which is for this comparison always one, since only the states of the magnet at the index are estimated. The second number represents the amount of simulated measurements. By using only one simulated sensor reading, the one right beneath the index finger is meant. By taking two into account, the index and middle sensor are pointed. And four means that all four simulated units are regarded. The abbreviations in the second column reflect whether the movement of $ \phi_{MCP} $ is regarded or not. \grqq no ad-ab \grqq stands for no adduction-abduction movement and \grqq ad-ab \grqq for the opposite. \\
One thing, that can be observed directly, is that for the case \grqq 11\grqq which still represents a full determined system, the results show a very high deviation from the perfect values, regardless how the model is adjusted. The mean over all errors is \SI{0.289}{\radian}. The best observable values can be obtained by the method using the constrained cylindrical model and neglecting adduction-abduction. By regarding, that the inserted magnetic values were predicted by this model and that the overall system state is simplified, this seems reasonable. Further on the constraints restrict the algorithm not to drift to far away. \ref{fig:11cylNa1} shows the results for this best guess and the deviation from the perfect values over time. 
By deploying only one set of forecasted sensor values more, the results get much better. The mean of all error means is \SI{0.054}{\radian}. also the standard deviation is almost constant. One could even state, that by using all four simulated sensor units, the error does not decrease very much (the mean over all errors is \SI{0.045}{\radian}). Therefore it can be stated as a first observation, that the system has to be overdetermined. 
By comparing the error from the objective function using the dipole model with the cylindrical one, a decrease can be observed. As already stated for the \grqq 11\grqq case, this just seems reasonable, since the magnetic flux densities were calculated by the same. However for real observed measurements, this has to be further evaluated.
Also, while considering that the field values for estimation still comprise the movement of adduction-abduction and since the ability to estimate the system state with a reasonable accuracy, the neglecting of those values just results in worse results. The biggest difference to the perfect values occur here at the time, the adduction-abduction is performed. The remaining parts, where $ \phi_{MCP} = 0 $ are also almost perfect. The behaviour is rather the same as displayed in \ref{fig:11cylNa1}, even though it represents the results for the fully determined system. By looking at the difference between the results of the constrained and unconstrained methods a slight decrease of the error by regarding the constraints can be observed. The same reason, as mentioned beforehand can be named, which is, that the algorithm shows better convergence by the deployed constraints. In the end almost fault free results can be observed by the cylindrical model, which takes the movement of adduction-abduction into account. Here it does not count too much, whether the minimizer is constrained or not. \todo{concluding statement? what are bad results? which dimension of errors is acceptable?}\\
\begin{table}[h]
\centering
\begin{tabular}{l l c c c c}
\toprule
 & &          				\multicolumn{2}{c}{Unconstrained}          &		\multicolumn{2}{c}{Constrained}\\ \cmidrule(lr){3-4}\cmidrule(lr){5-6}
 & & 								Dipole   			   & Cylindrical 	 			 & 		Dipole 			& 		Cylindrical \\ \midrule[2pt]
\multirow{2}{*}{11} & no ad-ab    & $ 0.194 \pm 0.002 $ & $ 0.074 \pm 0.001 $ & $ 0.367 \pm 0.015 $ & $ 0.035 \pm 0.000 $ \\ 
					& ad-ab		 & $ 0.252 \pm 0.003 $ & $ 0.257 \pm 0.013 $ & $ 0.570 \pm 0.020 $ & $ 0.570 \pm 0.020 $ \\ \midrule
\multirow{2}{*}{12} & no ad-ab    & $ 0.124 \pm 0.001 $ & $ 0.094 \pm 0.001 $ & $ 0.052 \pm 0.000 $ & $ 0.035 \pm 0.000 $ \\ 
					& ad-ab		 & $ 0.071 \pm 0.000 $ & $ 0.000 \pm 0.000 $ & $ 0.058 \pm 0.000 $ & $ 0.000 \pm 0.000 $\\ \midrule
\multirow{2}{*}{14} & no ad-ab    & $ 0.112 \pm 0.001 $ & $ 0.098 \pm 0.001 $ & $ 0.040 \pm 0.000 $ & $ 0.033 \pm 0.000 $ \\ 
					& ad-ab		 & $ 0.042 \pm 0.000 $ & $ 0.000 \pm 0.000 $ & $ 0.038 \pm 0.000 $ & $ 0.000 \pm 0.000 $\\										
\bottomrule
\end{tabular}
\caption[Quality of the minimization method for estimating one finger]
{The error mean and standard deviation for each tuning parameter of the minimization procedure in \si{\radian} are listed. The values are given in radians. The best promising results are represented by the constrained methods, which take $ \phi_{MCP} $ into account. It is also observable, that the system has to be overdetermined in order to lead to a good estimation of the system states. The minimization is performed on an introduced movement pattern for the index finger, whose values for the excited magnetic flux densities are simulated using the cylindrical bar magnet model. So only one finger state vector is estimated.}
\label{tab:oneFing}
\end{table}
\begin{figure}
\centering
\includegraphics{pictures/plots/difOne.png}
\caption[Estimated states vs. perfect states for using one magnet, one sensor.]
{The results and their deviation from the perfect values for one minimization procedure over time is displayed. The used objective function is described by the equation of the cylindrical model and does not comprise the movement of $ \phi_{MCP} $. For the constrained minimization one sensor reading is used to estimate the index finger states. This model represents the best expectable results for estimating one state vector with one magnet, with $ \mu = 0.035 \pm 0.000 $. , therefore the difference around \SI{40}{\second} are acceptable. At the end however the system tends to show bigger deviations from the perfect values. This behaviour is also observable for the overdetermined systems, which do not estimate the movement of adduction-abduction. The higher deviation at the end is induced, by the parallel movement of the other finger joints in combination with a change of $ \phi_{MCP} $. It is remarkable, that this behaviour does not already appear at \SI{40}{\second}.  \todo{Only one plot! (with states and deviation)}}
\label{fig:11cylNa1}
% script: 160223_compareResults.py
\end{figure}
In \ref{tab:timeOneFing} the mean time, needed for one estimation cycle is listed in seconds. It can be observed, that the time increases with the determinedness of the system. This is just logic, since the algorithm has more equations to take into account and to evaluate. Also the constrained methods show a faster timing behaviour, than the unconstrained. As a reason the restricted search space of the solver could be mentioned. The reduced system state by neglecting the adduction-abduction movement is also faster than the model, comprising this state, what is only reasonable, since one state variable less has to be estimated. The objective function, formulated with the dipole model shows also a faster evaluation time, compared to the one using the cylindrical. Since the cylindrical model represents a numerical approximation, which has to be evaluated at each iteration, the time consumption for evaluating is higher. The dipole model however consists of a relatively simple nonlinear equation matrix. So in the end the observed computation times are all reasonable. 
By comparing the quality of the solver with its timing behaviour, it can be stated that an increase in precision comes with higher computation times. For this example, using the perfect simulated data for the magnetic field, the estimation is not always fast enough, to match the observed sensor system frequency of \SI{20}{\Hz}. However it is evaluated, that the estimation results won't degrade drastically, if one or two measurements would be skipped, due to the computation time. The actually estimated system state is only used as initial starting guess for the next estimation. It is observed that the solver is capable, to intercept changes of a minimum of $ \pm 0.2 \si{\radian} $, between two measurements. So the initial starting point plays a not so important role for the solvability. For the assumed maximum angular velocity of \SI[per-mode=symbol]{0.175}{\radian \per \second} this change would reflect to a missing of one data set. What is more critical is the capability of estimating the state almost at real time. For the utilized simulated magnetic field values the best configuration for the minimizer to estimate the system state with an adequate frequency would be given by using the cylindrical magnetic model with adduction-abduction and taking the anatomic constraints into account. This would result in an estimation frequency of around \SI{7}{\Hz}, since the time needed to solve the problem is about \SI{0.148}{\second}. Compared to other hand tracking systems, this value is very high. However for getting a rough feedback on the actual finger state, this value should be sufficient.
\begin{table}[h]
\centering
\begin{tabular}{l l c c c c}
\toprule
 & &         			\multicolumn{2}{c}{Unconstrained}		 & 	\multicolumn{2}{c}{Constrained}\\ \cmidrule(lr){3-4} \cmidrule(lr){5-6}
 & & 								Dipole & Cylindrical & Dipole & Cylindrical \\ \midrule[2pt]
\multirow{2}{*}{11} & no ad-ab    & 0.037 & 0.077 & 0.008 & 0.017 \\ 
					& ad-ab		 & 0.089  & 0.119 & 0.029 & 0.037 \\ \midrule
\multirow{2}{*}{12} & no ad-ab    & 0.063 & 0.139 & 0.014 & 0.031 \\ 
					& ad-ab		 & 0.114 & 0.214 & 0.031 & 0.074  \\ \midrule
\multirow{2}{*}{14} & no ad-ab    & 0.110 &  0.251 & 0.025 & 0.059 \\ 
					& ad-ab		 & 0.216 & 0.409 & 0.056 & 0.148 \\										
\bottomrule
\end{tabular}
\caption[Time for one estimation step of one finger state vector]
{The table allows a comparison of the mean evaluation time (in seconds), needed for the presented minimization methods for estimating one finger state vector. The time is displayed in seconds. Note the influence of using a constrained or unconstrained method. Also a reduction in evaluation time can be observed while shrinking the size of the measurement vector $ \tilde{\mathrm{M}} $. The fastest method shows an evaluation time of \SI{0.029}{\second} for estimating a single state vector. However quality of the results is not satisfying. For more exact estimated values, the time lies around 0.074 to \SI{0.148}{\second}. This results in low estimation frequencies, however an almost real-time-like representation should be possible.}
\label{tab:timeOneFing}
\end{table}

For estimating the movement of multiple fingers, an adequate motion pattern is deployed. The simulated sequence consists only of 100 datapoints, reflecting a measurement time of only \SI{10}{\second}. This short time period is chosen, since first tests showed a very slow behaviour of the estimation stage. The utilized motion is visualized for each finger and each state in \ref{fig:multiFing}. As one can see, the finger are moving individually, to test whether the estimation is capable of that.
\begin{figure}
\centering
\includegraphics{pictures/plots/multiStates.png}
\caption[Introduced movement pattern for four finger estimation]
{The introduced motion pattern for the estimation of the state vectors for multiple fingers. In each column the states for one finger are displayed. The motion is deployed to represent individual movements of the finger, to check whether they cause a reasonable influence on the magnetic field to be estimated. Therefore each finger state itself is slightly different to the other.}
\label{fig:multiFing}
% python script: 160224_plotSequenceMulti.py
\end{figure}
For getting an insight, how good the states for multiple magnets can be estimated, several sensor-magnet configurations are simulated. The evaluation is done for two fingers (the index and middle) and all four. As learned from the previous results, four sensors are used for the estimation of two fingers, to ensure overdetermindeness. However for estimating all four finger state vectors the introduced system can only satisfy determinedness. For reasons of completeness, four additional sensors were introduced to the simulation, placed behind the four existing ones. As for the estimation of one finger, the values are simulated using the cylindrical model. The results are listed in \ref{tab:multFing}. The corresponding parameters are typed in the same manner as beforehand. 
\begin{table}[h]
\centering
\begin{tabular}{l l c c c c}
\toprule
 & &          				\multicolumn{2}{c}{Unconstrained}          &		\multicolumn{2}{c}{Constrained}\\ \cmidrule(lr){3-4}\cmidrule(lr){5-6}
 & & 								Dipole   			   & Cylindrical 	 			 & 		Dipole 			& 		Cylindrical \\ \midrule[2pt]
\multirow{2}{*}{24} & no ad-ab    & $ 0.119 \pm 0.000 $ & $ 0.081 \pm 0.000 $ & $ 0.051 \pm 0.000 $ & $ 0.039 \pm 0.000 $ \\ 
					& ad-ab		 & $ 0.114 \pm 0.000 $ & $ 0.000 \pm 0.000 $ & $ 0.085 \pm 0.000 $ & $ 0.005 \pm 0.000 $ \\ \midrule
\multirow{2}{*}{44} & no ad-ab    & $ 0.941 \pm 0.006 $ & $ 0.484 \pm 0.001 $ & $ 0.314 \pm 0.000 $ & $ 0.216 \pm 0.000 $ \\
					& ad-ab		 & $ 1.361 \pm 0.022 $ & $ 0.024 \pm 0.000 $ & $ 0.223 \pm 0.000 $ & $ 0.140 \pm 0.000 $ \\ \midrule
\multirow{2}{*}{48} & no ad-ab    & $ 0.543 \pm 0.001 $ & $ 0.509 \pm 0.001 $ & $ 0.236 \pm 0.000 $ & $ 0.183 \pm 0.000 $ \\ 
					& ad-ab		 & $ 0.494 \pm 0.000 $ & $ 0.005 \pm 0.000 $ & $ 0.385 \pm 0.000 $ & $ 0.098 \pm 0.000 $\\										
\bottomrule
\end{tabular}
\caption[Quality of the different minimization methods for estimating multiple fingers]
{The error mean and standard deviation for the different system configurations and minimization methods in \si{\radian} are listed. The values are given in radians. To achieve overall acceptable results, the overdeterminedness is again critical. The deployed system, consisting of four sensor units is therefore barely suited to estimate all four finger states which can be observed by an minimum error of \SI{0.024}{\radian}. As an extra, four additional sensor units were simulated. The results for this method show that it is in the end possible, to reconstruct four finger state vectors, as long as the system is overdetermined.}
\label{tab:multFing}
\end{table}

By looking at the results for the estimation of the state vectors for multiple fingers, a similar behaviour as mentioned for the case $ N = 1 $ can be obtained. However one interesting change can be observed. The unconstrained minimization method, described by the cylindrical model and taking $ \phi_{MCP} $ into account show here a better behaviour, than the constrained one. This is observable for each configuration of $ N $ and $ K $. One reason could be, that the \ac{BFGS} algorithm gives for those cases a better approximation for the search direction, than the constrained \ac{SLSQP} method. With the increasing number of system states, also the complexity increases. Therefore the constrained solver reaches its bounds, by using not good enough search directions. The unconstrained method however has more freedom, to look in each direction. For the estimation of two finger states, the unconstrained method using the cylindrical model with adduction-abduction serves the best result. For the estimation of all four fingers however, the minimization is not capable to reflect the perfect system states anymore. The overall smallest error for the estimation of four fingers with four sensors is \SI{0.024}{\radian}. So for the actually built system, comprising four sensors, an estimation of all four fingers will not lead to reasonable results. For getting an impression on the estimated states, compared to the perfect ones, those obtained values are plotted \ref{fig:difMult} However by introducing four additional sensors (case \grqq 48 \grqq), the results will get better. A mean error of \SI{0.005}{\radian} is observed by the unconstrained method, using the cylindrical model with adduction-abduction. However, as stated beforehand, the introduction of such a high number of magnets would break the goal of constructing a mobile and unobtrusive system. \\
By looking at the required estimation time of the several methods, a tremendous rise can be observed. To still observe reasonable results of the estimated states, more than \SI{1}{\second} is needed. This can be observed by almost all minimization configurations. This means a proper real time evaluation of the finger pose estimation is not possible anymore. By increasing the number of sensors $ N $ to 8, about \SI{17}{\second} would be needed to achieve reasonable results, which is obviously far away from real time behaviour or acceptance for post processing. To show the quality of the still best acceptable computation time, the estimated states for the fastest method for two finger state vectors is plotted in \todo{24dipNaC} \todo{really needed???}. 

\begin{table}[h]
\centering
\begin{tabular}{l l c c c c}
\toprule
 & &         			\multicolumn{2}{c}{Unconstrained}		 & 	\multicolumn{2}{c}{Constrained}\\ \cmidrule(lr){3-4} \cmidrule(lr){5-6}
 & & 								Dipole & Cylindrical & Dipole & Cylindrical \\ \midrule[2pt]
\multirow{2}{*}{24} & no ad-ab    & 0.920 & 1.632 & 0.291 & 0.382 \\ 
					& ad-ab		 & 2.129  & 3.346 & 0.602 & 1.275 \\ \midrule
\multirow{2}{*}{44} & no ad-ab   & 3.365 & 5.012 & 0.629 & 0.947 \\ 
					& ad-ab		  & 8.322  & 8.419 & 1.696 & 2.684 \\ \midrule
\multirow{2}{*}{48} & no ad-ab    & 7.130 &  9.670 & 1.137 & 1.988 \\ 
					& ad-ab		 & 14.346 & 17.558 & 3.945 & 4.677 \\										
\bottomrule
\end{tabular}
\caption[Time for one estimation step of multiple finger state vectors]
{The mean evaluation time in seconds for estimating multiple finger state vectors is listed above. It is observable, that the estimation of four fingers is far away from real time behaviour. This, in combination with the observations regarding the quality of the estimation, no good results are expected for real measurements. Only the estimation of the states for two fingers show adequate timing behaviour.}
\label{tab:timeMultFing}
\end{table}

\begin{figure}
\centering
\includegraphics{pictures/plots/difMult.png}
\caption[Estimated states for a system configuration of four sensors and four magnets]
{The displayed results are for the objective function which comprises $ \phi_{MCP} $ and is formulated with the cylindrical model equation. The unconstrained minimization estimates on the base of four simulated sensor readings the state vectors of four fingers.  The estimated an perfect states are plotted for each finger and their observed deviation over time, $ \mu = 0.024 \pm 0.000 $. The highest deviation can be recognized for $ \theta_{MCP} $ of the middle finger. The states of the other fingers can be estimated pretty well.}
\label{fig:difMult}
% script: 160224_compareResMulti.py
\end{figure}

The presented results visualize the behaviour and influence of different system configurations $ N $ and $ M $ for different ways of describing minimization problem, based on perfect, simulated magnetic field values. The following concluding statements can be derived:
\begin{itemize}
\item The system has to be overdetermined, i.e. $ N > K $.
\item The estimation time increases significantly with the size $ K $ of the system state.
\item The estimation time increases in an acceptable size with the number of deployed sensors $ N $.
\item Therefore an estimation of four fingers with the designed system, consisting of four sensors is barely possible in an adequate quality or real time behaviour.
\item The state $ \phi_{MCP} $ for adduction-abduction introduces higher estimation times, but can be estimated and should be used, to better reflect the human hand motion.
\end{itemize}
Since the results are based on perfect simulated magnetic flux densities from the cylindrical model, the estimation procedures comprising this model lead also the best results. It is evaluated, that the cylindrical method, including adduction-abduction and anatomic constraints leads to the overall best results for the estimation of one finger. However when porting the observations to real measurements on a human hand, one has to note that several additional distortion factors are added to the system, like the inexact position information of the finger and sensor dimensions or the surrounding magnetic field. Therefore in the ongoing estimation of real datasets, the cylindrical and the dipole method (both including the state $ \phi_{MCP} $ and constraints), are both used for the state estimation.


\subsection{Results for Recorded Datasets} \label{subsec:resMeas}

\subsubsection{Recording Procedure}\label{subsubsec:recSetup}

For the evaluation of the system at a real use case on the hand, the following setup is established. The proband wears the constructed sensor unit and a number of magnets on its fingertips. The obtained magnetic field values are received and saved by a Laptop, to do the state estimation phase afterwards. In this way specific parameters of the objective function or the system, like the number of sensor readings taken into account, can be adjusted later on and the results can be compared. The quality of the constructed system is further compared to the Leap Motion \ref{leap}. Therefore, the sensor data is recorded with the hand held above this system. For a rough qualitative judgement, a video of the performed movements is recorded. A poster with a circle and printed angular ticks is installed behind the motion area. A picture of the whole setup is shown in \todo{Make picture of setup! And annotate the relevant elements}. Each recorded dataset consists consequently of the states, obtained by the vision based Leap motion system and the sensor readings from the measurement units. For the fitting of the magnetic system to the hand measured and therefore error-prone joint and finger positions, each set comprises the introduced calibration gesture of bending the \ac{MCP} joints about \SI{90}{\degree}. Since the dynamic cancellation of the earth magnetic field is not possible with the presented method in \ref{subsec:earthEli}, the hand was tried to be calm and at a constant position throughout the whole recording session. So in the end, by this setup a comparison between the presented magnetic approach and the existing vision based Leap Motion system is possible.

\subsubsection{Evaluation, Discussion and Comparison to Leap Motion and Video Data}

The following paragraph presents and discusses the difference of the estimated states by the magnetic system with the finger postures, returned by the Leap Motion. Both systems show different acquisition frequencies. While the magnetic system works at the evaluated \SI{20}{\Hz}, the Leap Motion shows a framerate of \SI{110}{\Hz}. For a direct comparison between the two systems, the data from the Leap has to be downsampled. Therefore the magnetic and the Leap system save a timestamp, which represents the uptime of the system when the reading is observed. To adapt the Leap data to the magnetic system, only the data with the timestamp wich is closest to the one of the magnetic system is chosen. This method was evaluated to do the resampling in a representative manner, without loosing too much information or degrading the measurements unintentional. 

The presentation and discussion is structured similar to \ref{subsubsec:simEval}. The observations, made in the previous chapters are deployed for the formulation of the ongoing estimation problem. Therefore the finger state vector includes $ \phi_{MCP} $ and the results are based on the minimization algorithm \ac{SLSQP}, which takes the anatomic constraints into account. Therefore the results of the 6 different combinations of formalizing the optimization problem are evaluated. The comparison to the Leap will show, which influence the determinedness of the system has on real measurements and whether the states could be better estimated by describing the objective function with the cylindrical bar magnet or the magnetic dipole model. Since the previous results on simulated data showed that only the estimation of a single finger state vector leads to reasonable outcomes, the emphasize of the evaluation is put onto the calculated finger states of the index finger.

15 datasets were recorded, each consisting of the state values, returned by the Leap system and the corresponding measurements of all four sensor units, excited by the magnet on the index finger tip. As already described, each set of obtained magnetic flux densities includes the initialization movement, to fit the measured values to the introduced hand dimensions and to eliminate the surrounding magnetic field. Therefore, as an introductory step this movement has to be extracted to determine the scaling factors for each sensor unit, which have to be applied to the whole respective measurements. Based on those values, the states for the index finger were estimated. The difference vector to the states, returned by the Leap Motion system is calculated and normed for each estimated state, to get an overall measure for the deviation for each estimated set. For this error vector the mean and standard deviation is calculated to reflect the total error and stability of the magnetic estimation to the Leap data for one recorded set. Since the sets differ not only in the duration from each other but also by the speed and complexity of the performed movements, they have to be examined individually. Also if all sets would comprise the same length and the same predefined movements, a cumulative mean and standard deviation would not reflect good representative total values for those. This is induced, since the system is conditioned by many external influences, like the often mentioned hand size parameters, the constant height and orientation of the hand and the speed and movement range of the motion. However to proper evaluate the recorded sets and to compare them to each other, the method, showing the smallest error mean for one recorded set is determined. The results are listed in \ref{tab:estSet}. For each set the best parameters of the optimization method are coded by \mbox{\emph{cyl/dip\_ $ K N $}}, with
\begin{itemize}
\item \emph{cyl} means that the cylindrical model is used and 
\item \emph{dip} for the dipole model
\item $ K $, the number of finger state vectors to estimate and
\item $ N $, the number of sensors, taken into account for the estimation.
\end{itemize}
So for example \grqq cyl\_12\grqq means, that the objective function is formulated with the cylindrical model for estimating one finger state vector ($ K = 1 $) by using the measurements from two sensor units ($ N = 2 $). In the case of $ N = 1 $, the sensor beneath the index finger is used, for $ N = 2 $, the one under the middle finger is added and $ N = 4 $ means that the measurement vectors of all four sensors are taken into account.
\begin{table}
\centering
\begin{tabular}{l c c}
\toprule
 & Method & $ \mu [\si{\radian}] \pm \sigma^{2} $ \\ \midrule 
\textbf{Set 1}  & cyl\_12 & $ 0.581 \pm 0.020 $ \\ 
\textbf{Set 2}  & cyl\_12 & $ 0.587 \pm 0.012 $ \\ 
\textbf{Set 3}  & dip\_12 & $ 0.646 \pm 0.010 $ \\ 
\textbf{Set 4}  & cyl\_12 & $ 0.467 \pm 0.017 $ \\ 
\textbf{Set 5}  & cyl\_14 & $ 0.668 \pm 0.027 $ \\ 
\textbf{Set 6}  & cyl\_12 & $ 0.495 \pm 0.011 $ \\ 
\textbf{Set 7}  & cyl\_14 & $ 0.567 \pm 0.026 $ \\ 
\textbf{Set 8}  & cyl\_14 & $ 0.670 \pm 0.052 $ \\ 
\textbf{Set 9}  & dip\_14 & $ 0.606 \pm 0.024 $ \\ 
\textbf{Set 10} & cyl\_14 & $ 0.581 \pm 0.010 $ \\ 
\textbf{Set 11} & cyl\_14 & $ 0.603 \pm 0.004 $ \\ 
\textbf{Set 12} & dip\_14 & $ 0.676 \pm 0.022 $ \\ 
\textbf{Set 13} & cyl\_14 & $ 0.680 \pm 0.018 $ \\ 
\textbf{Set 14} & cyl\_14 & $ 0.525 \pm 0.010 $ \\ 
\textbf{Set 15} & cyl\_14 & $ 0.672 \pm 0.012 $ \\ \bottomrule
\end{tabular}
\caption[Parameters for the estimation results, showing the smallest difference to the Leap Motion]
{The table lists the methods, whose estimated states show the smallest difference to the one obtained by the Leap Motion system. The provided values represent the lowest mean and standard deviation in \si{\radian} for each set individually. The states from the Leap system serve here as the truth values. The results for Set 3, estimated with the dipole model by using two sensor units shows the overall smallest difference to Leap system. It can be noted that the average error of those best estimated states is relative high. One has to note, that at each set different motion patterns were performed. Also the duration of each set varies. Therefore a direct comparison between them would not lead to a representative statement. A detailed table, showing the error of each minimization method for each set is provided in the appendix.}
\label{tab:estSet}
\end{table}
The time needed for the estimation per measurement set is also monitored. Here, almost no differences to the results, obtained in \ref{subsubsec:simEval} are observed. The timing behaviour of the slowest set was evaluated to be \SI{0.092}{\second} and is observed by a method using four sensor readings. This value is in fact higher, than the system frequency, but the results are expected not to degrade with a loss of measurement sets. Since by the recognized maximum evaluation at most one data set gets neglected. Regarding the realtime capability, the respective worst estimation frequency would be \SI{10}{\Hz}. Since those results are not very surprising and were already discussed in \ref{subsubsec:simEval}, the time values are listed in the appendix of this work.

From \ref{tab:estSet}, the observations regarding the formulation of the optimization method from \ref{subsubsec:simEval} are confirmed. The system has to be at least overdetermined, since no good results are reached by the method using only one sensor unit for the estimation. Also taking as much measurements into account as available leads to better results than taking only 2 sensors into account. As an explanation one can head the same reason as before, the minimizer has more information about the actual state and can therefore find a more exact solution for the problem. 5 out of 15 sets show better results with $ N = 2 $, than with $ N = 4 $. However the two sets with the lowest difference to the Leap states use only two sensor values. This can be putted down to faulty measurements, induced by unstable positions and alignments of the hand during the data acquisition. By using faulty measurements, it is harder to find a solution, introducing a higher number of those leads to bad results. Therefore sometimes it is better to take less measurements into account, when one knows that they are bad. By taking more sensor units into account, one puts a higher trust into them. By regarding less, one relies more on the power of the minimization method. In the end it's a trade off between both.
Further on it can be stated, that the objective function, described by the cylindrical bar magnet model leads to better results as the dipole model. So it is  verified, that this model describes the magnetic field, induced by a cylindrical bar magnet, better, than the approximation with the dipole model. However 3 out of 15 datasets return better results for the dipole model. But by looking a bit closer to the errors, returned by the other minimization methods for these data sets, one recognizes, that the difference to the error, observed by a cylindrical method is only slightly smaller. For example for Set 3, the results for the cyl\_12 method are only worse by \SI{0.008}{\radian}. 
So in the end, the smallest deviation to the observed states from the Leap motion can be provided most often from the highest overdetermineded minimization method, formulated with the cylindrical model equation (cyl\_14). In numbers: 8 out of 15 sets. 
However the set showing the smallest deviation over all recorded sets uses only 2 sensor units for the estimation (cyl\_12). Set 4 shows a mean and standard deviation of $ 0.467 \si{radian} \pm 0.027 $. By regarding at the overall quality of the states, obtained of the magnetic estimation versus the data from the Leap motion system, one can note that the errors are pretty high. The mean over all sets is $ 0.602 \si{\radian} \pm 0.00 $, which corresponds to \SI{34.5}{\degree}. As mentioned beforehand this value has to be handled with care, since each dataset shows different size and motions. That the presented magnetic system is despite that big difference capable to track the finger motion is further evaluated, by looking at the results for each set individually. For the visualization of the returned states of both systems, Set 4 is plotted in \ref{fig:bestLeap}. An explanation to the magnitude and the characteristics of the differences is provided a bit later in this section. 

First, the results for estimating four finger state vectors are presented next. The recording procedure is done in the same way as for one state vector, beside that now each finger is equipped with a magnet on its tip. The estimated finger states vectors are each compared individually to the corresponding data of the Leap system. In this way, the means and standard deviations of the differences between the two systems are determined for each finger. Mind, that the state estimation problem has now the following size: $ N = 4 $, $ K = 4 $. Therefore as additional parameters for the estimation phase the problem is concerned to be constraint and to include the state $ \phi_{MCP} $. Only the type of the objective function is varied. It was evaluated, that the one, described by the cylindrical model leads the best results. The mean values for the difference of each finger state vector to the Leap data and the corresponding standard deviation over the sets are presented in \ref{tab:estSetFour}. 
\begin{table}
\centering
\begin{tabular}{l c c c c c}
\toprule
&  \multicolumn{5}{c}{$ \mu \si{\radian} \pm \sigma^{2} $} \\ \cmidrule{2-6}
& 			   				 Index 				 & Middle 			   & Ring 				 & Pinky 			   &  Cumulative \\ \midrule
\textbf{Set 1} &  $ 0.918 \pm 0.053 $ & $ 0.975 \pm 0.044 $ & $ 0.746 \pm 0.029 $ & $ 0.709 \pm 0.008 $ & $ 0.837 \pm 0.000 $ \\ 
\textbf{Set 2} &  $ 1.077 \pm 0.039 $ & $ 1.066 \pm 0.107 $ & $ 0.912 \pm 0.043 $ & $ 0.618 \pm 0.015 $ & $ 0.918 \pm 0.001 $ \\ \bottomrule
\end{tabular}
\caption[Difference of estimated states, compared to Leap Motion data for four finger estimation]
{The mean and standard deviation from the obtained estimation results to the Leap Motion data. Four finger state vectors are estimated. Since the obtained results show such a big difference to the Leap data and the actual performed movement, only two datasets were recorded. The high values for the mean difference and standard deviation for each finger, show that an estimation of four fingers with the deployed system is not possible.}
\label{tab:estSetFour}
\end{table}
For this case, only two datasets were recorded, since the results show similarities and the actual finger postures can not be estimated reliably. The differences of the calculated state vector is also quite time consuming. For Set 1 the average time per estimation step is measured to be \SI{0.837}{\second}, for Set 2 even \SI{0.918}{\second} were observed. Therefore an estimation with real time behaviour would not be possible anymore. Whereas for the estimation of one finger state, the difference to the Leap system is already pretty high, here a further increase is observable. The two sets comprise finger movements, which are performed simultaneously and alone, to check whether the system can distinguish between separate finger motions. The direct comparison of the two system states against each other shows that the magnetic estimation approach is not capable to identify individual finger movement reliably. \ref{fig:est44} tries to proof this. The norm of the states for the index and the middle finger, obtained by the Leap system and the magnetic estimation are plotted over time. The norm over all angles for one finger is chosen, since it represents a measure for the actual bending of the finger. 
\begin{figure}
\centering
\includegraphics{pictures/plots/est44.png}
\caption[Estimating the motion of four fingers]
{The norm over the states for the index and the middle finger are plotted. This should resemble a measure of the actual amount of bended angles of the finger, but does not reflect actual individual joint states. During the first \SI{17}{\second} parallel movements of all fingers are performed. Both systems show an increase for this. However when it comes to individual movement of the fingers, the states of the magnetic system don't represent the truth anymore. At \SI{20}{\second}, the single flexion-extension of the index finger is also estimated for the middle. Further on between \SI{30}{\second} and \SI{35}{\second}, where a movement of the pinky finger is performed, but the states are changing for the middle and index finger, which are held still. The states of the Leap motion system represent the truth much better. The pictures at the bottom serve as a visual reference and argument. \todo{corresponding pictures are est44\_0-40.jpg! Add them to the axis, or annotate them and place them beneath}}
\label{fig:est44}
% script: 160226_leapVsEst.py
\end{figure}
In combination with the provided pictures, extracted every \SI{5}{\second} from the recorded videostream, \ref{fig:est44} serves as an example to proof, that individual finger movements can not be estimated reliably by the magnetic system. At the beginning of the short sequence, two movements which are performed by all four fingers can be observed. Here the Leap and the magnetic system show both a change for the angles of the index and middle finger. Therefore both systems return the truth. The measurements of the magnetic system are fitted to the initialization gesture, which is performed around that time, at \SI{5}{\second}. Since this motion comprises movement of all four fingers, it is more likely to get the right estimated states here. However when it comes to individual finger movements, the states for the presented fingers are estimated wrong. Around \SI{20}{\second} only the index finger is bent. This is captured by the Leap Motion correctly, since the state of the middle finger is almost \SI{0}{\radian}. The magnetic system however estimates an additional excessive change for the middle finger, which does not happen. During \SI{30}{\second} and \SI{35}{\second} the flexion-extension, which happens actually for the pinky finger are estimated to be performed by the middle and index finger. The Leap system again reflects the right states and shows only small angles. The presented behaviour can be obtained almost every time when individual finger movements occur. As a reason for the bad estimation results, one could head the following: On the one hand, the system is only fully determined, which degrades the results for the estimation, as observed in \ref{subsubsec:simEval}. On the other hand, the obtained changes of the magnetic field, induced by the movement of a single finger are only small. Because the parameters for the hand dimensions can only be determined up to a certain accuracy, additional erroneous contributions are introduced, since the optimizer tries to fit the values to a slightly different hand model. The results could be improved, by acquiring more exact values for the hand dimensions and by taking the readings of more sensor units into account. However, since the deployed system consists only of four sensors, this could not be evaluated. In the end the presentation of this short example for the results of estimating the states of four magnets by using four sensor units does not lead to satisfiable results. 

The estimated values, obtained for the afore presented prediction of a single finger state vector showed a smaller difference to the states from the Leap Motion. On the basis of those recorded datasets and their results, a more detailed comparison to the Leap system is further presented. Also the reduced state size ($ K = 1 \rightarrow size(\mathrm{X}_{1}) = 3 $) allows an easier examination of the results and possible sources of error. The estimated finger states of the dataset 4 showed the smallest difference to the states of the Leap system. The values for the finger state vector of both systems are plotted in \ref{fig:bestLeap}.\\ 
The estimated values for each state from the magnetic and the Leap system are plotted over time. As a first impression and especially focusing on the state of $ \theta_{MCP} $, the two systems show similarities. The initialization gesture, which happens at the beginning at around \SI{5}{\second}, is evaluated by both systems as a bare movement of the \ac{MCP} joint. Only the Leap shows here contributions of adduction-abduction, which actually did not happen. This behaviour can be recognized right at the following till \SI{15}{\second} again. By regarding the magnetic estimation, some none smooth peaks for $ \theta_{MCP} $ are observable. They mainly occur, at the same time, when a change of $ \theta_{PIP} $ is estimated. It is assumed, that at those points the solver didn't find an optimal solution. It is also to note here, that for the estimated angles of the \ac{PIP} and \ac{DIP} the biggest differences between the two systems are observable. The values from the magnetic estimation are much higher, than the ones from the Leap. Note, that those two states are estimated as one by the magnetic approach, since the anatomic condition $ \theta_{DIP} = \frac{2}{3} \theta_{PIP} $ is used. The direction returned by both systems is the same, which means that both show a parallel increase or decrease of the angles. However the states from the magnetic system are higher than the ones from the Leap Motion. Further on the movement of adduction-abduction shows remarkable differences. The estimated values of $ \phi_{MCP} $ show a more stable behaviour than the Leap system. It should be noted, that during the movement of flexion-extension the motion was tried to be performed with very small adduction-abduction. Nevertheless for this state both systems show also similarities. For example between \SI{40}{\second} and \SI{50}{\second}, the movement in negative direction and back are captured by both systems. By looking at the pictures, which are extracted from the video each \SI{5}{\second}, the overall quality of both systems is verified.
\begin{figure}
\centering
\includegraphics{pictures/plots/bestEst.png}
\caption[Comparison of estimated states, which fit best to Leap data]
{Each state value of the index finger, obtained by the Leap Motion and the magnetic estimation are plotted over time. The recorded data is Set 4, which shows the smallest deviation between both systems. The values for $ \theta_{MCP} $ show the most similarities. $ \theta_{PIP} $ and $ \theta_{DIP} $ show common directions, however the estimated states are much higher. For the movement of adduction-abduction the Leap Motion recognizes a more restless behaviour but they also have common phases. The difference, normed over all four states is plotted at the bottom. Here the differences for $ \theta_{PIP} $ and $ \phi_{MCP} $ show the highest impact. \todo{insert the pictures of bestLeap folder! each 5 seconds.}}
\label{fig:bestLeap}
% script: 160226_leapVsEst.py
\end{figure}
% drawbacks Leap
Till now, the estimation results were only compared to the Leap Motion, which is said to return the ground truth for the state. Well as already observed for set 4, those values are also not perfect and constant over time, which is showed for example by the very high changes for $ \phi_{MCP} $ in positive direction. This would mean, that the bones move about \SI{0.8}{\radian} (=\SI{45}{\degree}) towards the middle finger, which was definitely not performed. Most of the datasets from the Leap show a high deviation for the state of adduction-abduction from the de facto values for this. During most of the time, the motions were performed to mainly show contributions of flexion-extension, therefore the view of the camera is also aligned to capture those movements best. Therefore an exact value on the size of this deviation from the real state of $ \phi_{MCP} $ cannot be stated, due to the overall setup and focus on estimating flexion-extension. Further concerning the behaviour of the Leap system, one can head that a kind of relationship between $ \theta_{DIP} $ and $ \theta_{PIP} $ can be observed. In almost every set, a motion of \ac{PIP} introduces always also a motion on \ac{DIP}. A sequence of set 14 shows quite good, that there is a dependency on both states. Only the recorded states for those two values are plotted. However the connection between them is not static, as assumed by my hand model. The angle for the \ac{PIP} gets never smaller than for \ac{DIP}. This observation should not be a drawback or induce additional errors. As stated in \todo{reference anatomic} it is quite usual to induce a relationship between those two values. However from the information available for the Leap, a hard programmed/equation like explanation of this behaviour is not found.
% % % qualitative evaluation/comparison
% ++ motions similar to init movement
% ++ slow motions of ad-ab (set4)
By checking all sets qualitatively with the Leap Motion and the recorded video data, one could determine the following set of gestures, to be trackable by the magnetic system. On the one hand the gesture, where the values are fitted to can be observed pretty stable along one dataset. This sounds only reasonable, since the obtained magnetic flux densities are adjusted for this movement. On the other hand all motions, which induce mainly changes of flexion-extension on the \ac{MCP} joint fall also into this category. This is also observable by set 4, since at 10 and 5 \todo{seconds} the angle of \ac{MCP} is estimated not to be totaly \SI{90}{\degree}, which is also observed by the Leap and can be verified qualitatively with the pictures. Further on, as already observed by set 4, a slow change of $ \phi_{MCP} $ can be tracked quite well. 
% -- ad-ab more complex
By adding the results of other datasets, where the state of $ \phi_{MCP} $ changed during a flexioned \ac{MCP} joint, it is evaluated, that it cannot be estimated very reliably. \todo{Set 11} shows this quite good. Also the motions are performed quite fast during this set. Also the zero-phases for performing a fist can be noted here! So say the things for set 5 here and plot also set 5. 
% -- set5 -> fist
The rapid fluctuations especially for $ \theta_{MCP} $ can be stated here. Those are also recognized in set 4, for example at \SI{20}{\second} or between \SI{30}{\second} and \SI{45}{\second}. For the other sets, these peaks are even worse and also lead sometimes to a $ \theta_{MCP} = 0 $ for a few seconds, which could be immediately be stated as false for most cases, by qualitatively looking at the video. This behaviour is observed, when a fist is performed. One set, where this effect is recognized quite often is Set 5 \todo{make plot set 5}. The estimated states for flexion-extension are plotted and the corresponding video parts are provided. It can qualitatively seen, that the states are wrong. However the angles for $ \theta_{PIP} $ and $ \theta_{DIP} $ reflect the real conditions quite good. For a performed fist, the Leap often sets those values quite low and overweights the angle for the \ac{MCP} joint. This can also be observed in \todo{figure set 5}, for example between \todo{time! 30-38 sec}. 
% -- motion velocity
However, \todo{formulate it as \grqq the overall motion velocity, angular velocity is not allowed to be to high \grqq} when it is performed to fast, the estimation is not capable anymore of this movement. This is assumed to be on the one hand induced by the small movement range of adduction-abduction, but the main reason is the overall system frequency. Since it is with \SI{20}{\Hz} quite slow, rapid or staccato like movements can not be tracked quite well. A faster data acquisition rate would therefore lead to probably better results. So to reconstruct the motion reliably with the magnetic system, they should be performed with an adequate speed. As an additional time critical factor one could state the estimation phase. Beforehand it was stated, that a maximum duration of \todo{how fast is the worst?} seconds would not really degrade the impression of real time data. For the overall system frequency this is also true. However if the data acquisition rate could be increased, the time limiting factor would be represented by the estimation time. However, since the speed of the motions was not tracked, a detailed value for the maximum angular velocity of the motion could unfortunately not be provided.\\


 



	\begin{itemize}	
	\item discuss the deviation (also take other sets into account) from Leap, in order to identify which motion causes the biggest differences (fl-ex or ad-ab)\\
		$ \rightarrow $ is a constant behaviour observable? $ \rightarrow $ not really!
	\item state your observations/drawbacks from Leap 
		\begin{itemize}
		\item when finger are close together, tracking/recognition at all is harder
		\item DIP and PIP show the same constraint as I am using ($ PIP = 2/3 DIP $) (160210\_set2 19s-28s) \\
			$ \rightarrow $ evaluated, it is not statically like that, but a relation is there!
			$ \rightarrow $ observable almost everywhere, but after all, this is not a sign for badness...
			
		\item angle in MCP introduces most times also angle in DIP/PIP (160210\_set2) 			
		\item 160210\_set1-2 are good examples, which show, that Leap is not perfect!
			$ \rightarrow $	compare those bad results to estimation and video
		\item also movement of ad-ab is often detected, while it isn't performed at all!
		\end{itemize}
	\item making a fist introduces almost every time $ \theta_{MCP} = 0 $
				
	\item from here you can build the bridge to go the step away from the Leap and evaluate the results against the intuition from the \textbf{videos}
	\item find parts of estimated sets, which show, that flexion-extension / ad-ab is trackable (based on video data) and that Leap data is bad(or good) \\
		$ \rightarrow $ 160210\_set4 shows, that ad-ab can be detected quite good (70s-90s)	\\
		$ \rightarrow $	you can make your system look better again :)  
	\end{itemize}
	

	
	
Further things to talk about... \\
\subsubsection{Influence of Different System Parameteres}

\textbf{influence of normed fitting gesture / use fist? and observed fitting values}
	\begin{itemize}
	\item scaling to flat scale fitting values leads to very bad results! (just use a nice estimation set and apply both methods)
	\item \todo{set for showing this: }
	\item fist is not good for fitting, since it is slightly different each time and everyone makes it different (pictures of videos and observed B-fields)
	\item cardboard fitting has only slight influence. After all it worsens the results, because additional movements are made while placing the cardboard and so on. Further on the Leap detection is not very good, since it is not capable of the high brightness change\\
	$ \rightarrow $ do it during the recording
	 
	\end{itemize}


\textbf{influence of exact hand dimensions/parameters}
	\begin{itemize}
	\item so in the end the parameters have to resemble the truth, but since the data is fitted to the calculated values, it's influence is not too big
	\item show it on one dataset exemplary (just a normal set...)
	\item \todo{dataset: }
	\end{itemize}

\textbf{influence of distance sensor to magnets}
	\begin{itemize}
	\item changes in magnetic field are too small...
	\item dataset: 160210\_set10 (Leap is down at the end, but for an impression it is sufficient)
	\item the results within the methods vary a lot and they do not represent the truth!
	\end{itemize}

%
\textbf{tries with MPU / sensor frequency}
	\begin{itemize}
	\item setting sensor frequency to 50 or 25 Hz has no influence on results
	\item MPU results as expected not good...
	\item start position can be \grqq detected\grqq after rotation again, but the results with rotation are bad...
	\item sets: 160217\_set6 (also with Leap!)
	\item \todo{record one more set: }
	\end{itemize}

%



\subsubsection{Concluding Observations}
	\begin{itemize}
	\item very fragile/sensitive system
	\item sensitive to hand/body movements, calibration gesture
	\item bad/difficult reproducibility of results/measurements
	\item quality of results is not totally comparable/identifiable by Leap (since this system is also faulty)
	\end{itemize}


Presentation and compare between EKF and minimizing approach
